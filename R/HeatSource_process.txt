Generate plot of Heat Source model calculated Effective Shade
Middle Fork Coquille River
Jim Bloom - Nov 2017
VERSION FOR BASE GRAPHICS EXAMPLE - R USERS/LEARNERS GROUPS


The flexibility of base R comes at a price, but it means you can make all sorts of things you need to without struggling against the system. Which is a huge advantage for data analysts. There are some graphs that are pretty straightforward in base, but require quite a bit of work in ggplot2.

When making graphs that are production ready or fit for publication, you can do this with any system. You can do it with ggplot2, with lattice, with base R graphics. But regardless of which system you use it will require about an equal amount of code to make a graph ready for publication.

R Package Requirements:
* install.packages(c(\"chron\", \"hydroGOF\", \"zoo\", \"TTR\", \"car\"),  dep=TRUE) "

Process:

* Process heat source model output for a current condition scenario and a site potential scenario and generate plots and tables of data useful for a TMDL to address temperature concerns application to middle fork coquille model.

* Oct 10 2018 repeat to process Jul 15 to Aug 15 sims with zero cloudiness Process Jul 15 to Aug 15 sims with zero cloudiness
* Define paths to locations to place plots and tables
* Titles - revise to match scenarios
o TitleDate <- \"Jul 16 to Sep 8 2003\""
o TitleCloud <- \"Observed Cloudiness\""
o TitleCCC <- \"SPV Veg\" 
        Note that even though TitleCCC, in this case treating an SPV veg scenario as simnoA 
o TitleSPV <- \"CCC Veg and Reduced Trib and BC T\""
o TitleSPV <- \"Current Vegetation\""
o TitleSPV <- \"SPV Veg and Reduced Trib and BC T\""
o TitleQ <- \"7Q10 Low vs. 2003 Observed\" #river flow"
o TitleQ <- \"2003 Observed\" #river flow"
* Read in and process shade output
* SPV or other simulation to be compared to sim a
* Calculate mean effective shade
* Make a vector of stream km from the header row
* Make a vector of stream km from the header row for SPV
* Segment length - 100 m for mf Coquille (vs. 200 m for sf coquille)
* PLOT EFFECTIVE SHADE
* SIMA
* BaseGrafX
* SIMB
* BaseGrafX
* SIMA AND SIMB ON SAME PLOT
* READ IN MODEL CALCULATED TEMPERATURE AND DERIVE 7DADM TEMPERATURES
* MAKE A VECTOR OF STREAM KM FROM THE HEADER ROW
* Criteria
o u/s from RKm 18.45 T criteria is 16.0 C
o d/s from RKm 18.45 T criteria is 18.0 C
o for(i in 1:length(simT.kmA)) {if (simT.kmA[i]>18.4){Tcrit.kmA[i] = 16.0}
o else Tcrit.kmA[i] = 18.0}
o Avoid loop
* DERIVE 7DADM T FOR ALL SEGMENTS AND DAYS AND TEMPORAL MAXIMUM, MINIMUM, AND AVERAGE 7DADM T FOR EACH SEGMENT
* ALSO DERIVE DAILY AVERAGE T FOR ALL SEGS AND DAYS AND TEMPORAL MAX, MIN, AND AVG DAILY AVG T FOR EACH SEGMENT
* Simulation A
o simT.DailyMax2 <- simT.d.x
o simT.DailyMin2 <- simT.d.x
o simT.DailyMean2 <- simT.d.x
o for(i in 1:length(simT.kmA))
* Simulation B 
o simT.DailyMax2 <- cbind(simT.DailyMax2,simT.dm) #Attach newly calculated values to previously calculated values
o simT.DailyMin2 <- cbind(simT.DailyMin2,simT.dm) #Attach newly calculated values to previously calculated values
o simT.DailyMean2 <- cbind(simT.DailyMean2,simT.dm) #Attach newly calculated values to previously calculated values
* PLOT 7DADM TEMPERATURE - CCC - MEAN MIN MAX - WITH SHADING
o biologically-based numeric criteria for MF Coquille: HW to RKm 18.45: 16.0C; RKm 18.4 to mouth: 18.0C
* BaseGrafX – polygon
* lines(RKm.Tcrit,Tcrit, type=\"l\", lty=2, lwd=2, col=\"black\")
* BaseGrafX - grid v abline
* grid(col = \"gray\", lty = \"dotted\", lwd = 1)
* PLOT 7DADM TEMPERATURE - SPV - MEAN MIN MAX - WITH SHADING
* grid(col = \"gray\", lty = \"dotted\", lwd = 1)
* BaseGrafX
* PLOT 7DADM TEMPERATURE - CCC AND SPV - MEAN MIN MAX - WITH SHADING "82"
* biologically-based numeric criteria for SF Coquille: HW to RKm 30.1: 16.0C; RKm 30.1 to mouth: 18.0C
* grid(col = \"gray\", lty = \"dotted\", lwd = 1)


